<!DOCTYPE html>
<html>
  <head>
    <title>Rock, Paper, Scissors</title>
  </head>
  <body>
    <script>
      // Variables for player scores
      let playerWins = 0;
      let computerWins = 0;

      // Randomly choose what computer plays
      function computerPlay() {
        let randomRoll = Math.random()
        if (randomRoll < (1/3)) {
          return "rock";
        } else if (randomRoll > (1/3) && randomRoll < (2 * 1/3)) {
          return "paper";
        } else {
          return "scissors";
        }
      }

      // Plays one round of the game
      function playRound(computerSelection) {
        let playerSelection;
        
        // Prompt till valid input is received
        do {
          playerSelection = prompt("Rock, Paper or Scissors?").toLowerCase();
        }
        while (playerSelection != "rock" && playerSelection != "paper" && playerSelection != "scissors");
        
        // Compare rolls, declare winner and update player scores
        if (playerSelection == "rock") {
          if (computerSelection == "rock") {
            console.log(`You played ${playerSelection}`);
            console.log("Computer plays rock");
            console.log("It's a draw!");
            console.log("************************");
            return
          } else if (computerSelection == "paper") {
            console.log(`You played ${playerSelection}`);
            console.log("Computer plays paper");
            console.log("Paper beats rock, you lose!");
            console.log("************************");
            computerWins++;
            return
          } else {
            console.log(`You played ${playerSelection}`);
            console.log("Computer plays scissors");
            console.log("Rock beats scissors, you win!");
            console.log("************************");
            playerWins++;
            return
          }
        } else if (playerSelection == "paper") {
          if (computerSelection == "paper") {
            console.log(`You played ${playerSelection}`);
            console.log("Computer plays paper");
            console.log("It's a draw!");
            console.log("************************");
            return
          } else if (computerSelection == "rock") {
            console.log(`You played ${playerSelection}`);
            console.log("Computer plays rock");
            console.log("Paper beats rock, you win!");
            console.log("************************");
            playerWins++;
            return
          } else {
            console.log(`You played ${playerSelection}`);
            console.log("Computer plays scissors");
            console.log("Scissors beat paper, you lose!");
            console.log("************************");
            computerWins++;
            return
          }
        } else {
          if (computerSelection == "scissors") {
            console.log(`You played ${playerSelection}`);
            console.log("Computer plays scissors");
            console.log("It's a draw!");
            console.log("************************");
            return
          } else if (computerSelection == "paper") {
            console.log(`You played ${playerSelection}`);
            console.log("Computer plays paper");
            console.log("Scissors beat paper, you win!");
            console.log("************************");
            playerWins++;
            return
          } else {
            console.log(`You played ${playerSelection}`);
            console.log("Computer plays rock");
            console.log("Rock beats scissors, you lose!");
            console.log("************************");
            computerWins++;
            return
          }
        }
      }

      // Play 5 games and declare the winner
      function game() {
        let gameCounter;
        for (gameCounter = 0; gameCounter < 5; gameCounter++) {
          playRound(computerPlay())
        }
        console.log(`Player score: ${playerWins}`);
        console.log(`Computer score: ${computerWins}`);
        console.log("************************");
        if (playerWins > computerWins) {
          console.log("You won this game!")
        } else if (playerWins < computerWins) {
          console.log("Computer won this game!")
        } else {
          console.log("It's a draw!")
        }
        playerWins = 0;
        computerWins = 0;
        return
      }

      game();
    </script>
  </body>
</html>